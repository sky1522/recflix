# RecFlix 프로젝트 리뷰 & 로드맵

**최종 업데이트**: 2026-02-12

---

## 1. 초기 기획 vs 현재 구현 달성도

| 영역 | 초기 기획 (Phase 1-8) | 현재 구현 (Phase 17) | 변화 |
|------|----------------------|---------------------|------|
| **영화 데이터** | 32,625편 (CSV 1차) | **42,917편** (+31.5%) | 신규 CSV 마이그레이션 |
| **DB 컬럼** | 18개 기본 컬럼 | **22개** (+6, -2 정리) | director, cast_ko, weighted_score 등 추가 |
| **추천 요소** | MBTI + 날씨 + 개인취향 (3요소) | **MBTI + 날씨 + 기분 + 개인취향 (4요소)** | Mood(기분) 요소 추가 |
| **추천 가중치** | MBTI 35% / Weather 25% / Personal 40% | **MBTI 25% / Weather 20% / Mood 30% / Personal 25%** | v2 튜닝 완료 |
| **감정 분석** | 없음 (Rule-based 점수만) | **2-Tier 시스템** (LLM 1,711편 + 키워드 41,206편) | Claude API 연동 |
| **품질 필터** | 없음 | **weighted_score >= 6.0** + 연속 보정(x0.85~1.0) | 정밀 품질 관리 |
| **연령등급** | certification 컬럼만 존재 | **4단계 필터링** (all/family/teen/adult) 전 API 적용 | 실질적 필터 구현 |
| **API 엔드포인트** | ~12개 | **18개+** (LLM, emotion, hybrid 등 추가) | 기능 확장 |
| **프론트엔드 페이지** | 6개 기본 페이지 | **8개 페이지** + 모달 + 모바일 네비게이션 | UX 고도화 |
| **배포** | Docker 설정만 | **Vercel + Railway 프로덕션 운영 중** | 실서비스 가동 |

---

## 2. 기획에 없었지만 추가된 핵심 기능

| 기능 | Phase | 설명 |
|------|-------|------|
| **LLM 캐치프레이즈** | 10 | Claude API로 영화별 맞춤 문구 생성 + Redis 캐싱 |
| **emotion_tags 2-Tier** | 11, 14 | LLM 정밀 분석(1,711편) + 키워드 기반(41,206편) |
| **기분(Mood) 추천** | 11 | 6가지 기분 → 7대 감성 클러스터 매핑 |
| **30% LLM 보장 혼합 정렬** | 11 | 추천 풀에서 LLM 분석 영화 최소 30% 보장 |
| **새로고침 버튼** | 11 | Fisher-Yates 셔플, API 호출 없이 UI 재배치 |
| **연령등급 필터** | 14 | NULL 등급 처리 포함 4단계 필터링 |
| **날씨 한글 도시명** | 16 | Reverse Geocoding API + 70개+ 매핑 |
| **모듈 레벨 캐싱** | 17 | 페이지 네비게이션 시 추천 데이터 보존 |

---

## 3. 추천 알고리즘 진화 과정

```
Phase 6 (초기)
  Score = 0.35*MBTI + 0.25*Weather + 0.40*Personal
  필터: 없음

Phase 11 (emotion 도입)
  Score = 0.30*MBTI + 0.20*Weather + 0.20*Mood + 0.30*Personal
  필터: vote_count >= 30, vote_average >= 5.0

Phase 14 (v2 최종)
  Score = 0.25*MBTI + 0.20*Weather + 0.30*Mood + 0.25*Personal
  필터: weighted_score >= 6.0
  보정: x0.85~1.0 연속 품질 보정
```

### 주요 변경 포인트

- **Mood 가중치 강화** (0.20 → 0.30): 사용자가 선택한 기분이 추천에 가장 큰 영향을 미치도록 조정
- **MBTI/Personal 완화** (0.30 → 0.25): 특정 요소의 과잉 지배 방지
- **품질 필터 통합**: 2중 조건(vote_count + vote_average) → 단일 weighted_score 기준으로 단순화
- **연속 품질 보정**: binary bonus(+0.1/+0.2) → weighted_score 기반 x0.85~1.0 곱셈으로 부드러운 품질 반영

---

## 4. 데이터 진화

| 항목 | Phase 1 (초기) | Phase 13 (현재) |
|------|---------------|----------------|
| 영화 수 | 32,625편 | 42,917편 |
| 평균 평점 | 5.92 | 6.31 |
| CSV 컬럼 | 41개 | 43개 |
| emotion_tags | 없음 | 42,917편 (100%) |
| mbti_scores | 32,625편 | 42,917편 (100%) |
| weather_scores | 32,625편 | 42,917편 (100%) |
| 관계 데이터 | 장르/출연진만 | + 키워드, 제작국, 유사영화 |

### emotion_tags 2-Tier 시스템

| 방식 | 대상 | 영화 수 | 최대 점수 | 정밀도 |
|------|------|--------|----------|--------|
| **LLM 분석** (Claude API) | 인기 상위 | ~1,711 | 1.0 | 높음 (연속 분포) |
| **키워드 기반** | 나머지 | ~41,206 | 0.7 (상한) | 중간 (규칙 기반) |

---

## 5. 고도화 제안 (로드맵)

### A. 단기 (1-2일) - 즉시 적용 가능

| # | 제안 | 설명 | 난이도 |
|---|------|------|--------|
| 1 | **검색 결과 하이라이팅** | 검색 키워드를 결과에서 볼드/하이라이트 처리 | 낮음 |
| 2 | **유사 영화 섹션 강화** | similar_movies 테이블 활용도 낮음 → 상세 페이지 하단 "이 영화를 좋아하셨다면" 섹션 | 중간 |
| 3 | **SEO 메타태그 최적화** | 영화 상세 페이지 `generateMetadata`로 동적 OG 태그 (포스터, 제목, 줄거리) | 낮음 |
| 4 | **에러 바운더리 추가** | 전역 error.tsx + 개별 컴포넌트 에러 처리로 UX 안정성 향상 | 낮음 |

### B. 중기 (3-7일) - 서비스 품질 향상

| # | 제안 | 설명 | 난이도 |
|---|------|------|--------|
| 5 | **소셜 로그인** | Google OAuth + Kakao 로그인으로 가입 허들 낮춤 | 중간 |
| 6 | **시청 기록 기반 추천 강화** | 현재 찜+평점만 반영 → 상세 페이지 조회 기록도 Personal Score에 반영 | 중간 |
| 7 | **추천 이유 설명 강화** | "#MBTI추천" 태그 외에 자연어 설명 ("당신의 INTJ 성향에 맞는 깊이 있는 스토리") | 중간 |
| 8 | **PWA 지원** | manifest.json + Service Worker로 앱 설치 + 오프라인 지원 | 중간 |
| 9 | **다크모드/라이트모드** | 현재 다크 고정 → 시스템 테마 연동 토글 추가 | 중간 |

### C. 장기 (1-2주) - 기술 고도화

| # | 제안 | 설명 | 난이도 |
|---|------|------|--------|
| 10 | **CI/CD 파이프라인** | GitHub Actions: 린트/테스트 → Vercel Preview → Railway 스테이징 | 높음 |
| 11 | **A/B 테스트 프레임워크** | 추천 가중치를 사용자 그룹별로 다르게 적용하여 효과 측정 | 높음 |
| 12 | **Collaborative Filtering** | Content-based 중심 → 유사 사용자 기반 추천 추가 (Matrix Factorization) | 높음 |
| 13 | **실시간 트렌딩** | 최근 24시간 조회/찜 수 기반 "지금 뜨는 영화" 섹션 | 중간 |
| 14 | **모니터링** | Sentry (에러 추적) + API 응답 시간 로깅 | 중간 |

### D. 데이터 품질 개선

| # | 제안 | 설명 |
|---|------|------|
| 15 | **10,292편 신규 영화 LLM 재분석** | 현재 키워드 기반(상한 0.7) → LLM 정밀 분석으로 추천 정밀도 향상 |
| 16 | **MBTI/Weather 점수 고도화** | 현재 장르+감정 규칙 기반 → LLM 분석 결과를 활용한 2차 보정 |
| 17 | **overview NULL 영화 처리** | 줄거리 없는 영화의 emotion_tags 정밀도 개선 |

---

## 6. 기술 부채 (Technical Debt)

| 항목 | 현재 상태 | 권장 |
|------|----------|------|
| **테스트 코드** | 없음 | pytest (백엔드) + Jest/Vitest (프론트엔드) 최소 단위 테스트 |
| **타입 안전성** | `any` 타입 일부 사용 | 엄격한 TypeScript (`strict: true`) |
| **API 문서** | Swagger 자동 생성만 | API 사용 예시, 에러 코드 문서 보강 |
| **환경 분리** | 로컬/프로덕션 2개 | 스테이징 환경 추가 (Railway 별도 서비스) |
| **DB 마이그레이션** | 수동 스크립트 | Alembic 도입으로 버전 관리 |
| **보안** | JWT + bcrypt 기본 | Rate Limiting, CSRF 토큰, 입력 검증 강화 |

---

## 7. 종합 평가

### 달성한 것

- 초기 Phase 1-8 기획 대비 **17 Phase까지 확장**, 단순 MBTI+날씨 추천에서 **4요소 Hybrid 엔진 + LLM 감정 분석 + 품질 보정**까지 발전
- 42,917편 영화 DB와 Vercel + Railway **프로덕션 운영 중**
- Netflix/Watcha 수준의 반응형 UI + 모바일 최적화
- 실시간 날씨 연동 + 기분 기반 추천이라는 **차별화된 UX**

### 가장 임팩트가 큰 다음 단계 (Top 3)

1. **소셜 로그인** - 가입 허들 제거로 사용자 확보
2. **SEO 메타태그** - 외부 유입 증가 (포트폴리오 노출)
3. **추천 이유 자연어 설명** - 사용자 만족도 및 신뢰도 향상

---

## 관련 문서

- [PROGRESS.md](../PROGRESS.md) - Phase별 개발 진행 상황
- [CHANGELOG.md](../CHANGELOG.md) - 날짜별 변경 이력
- [RECOMMENDATION_LOGIC.md](RECOMMENDATION_LOGIC.md) - 추천 알고리즘 상세
- [DATA_PREPROCESSING.md](DATA_PREPROCESSING.md) - 데이터 전처리 과정
